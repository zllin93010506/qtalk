<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" charset="utf-8">
	// Wait for device API libraries to load
	//
	//document.addEventListener("deviceready", onDeviceReady, false); 

	var homehub;
	
	var hLED;
	
	var hMSG;
	
	var ScriptID;
	
	var mScript="0	1023	700	60 \n0	60	 200	100\n";

	// device APIs are available
	//
	function onDeviceReady() {
		alert('onDeviceReady');
		//playAudio("http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3");
		
		homehub = new Homehub(function(){}, function(){});
		hLED = new HomehubLED(function(){}, function(){});
		hMSG = new HomehubMSG(function(){}, function(){});
	}
	
	function callHomeHub(str)
	{	
		homehub.test(str);
	}
	
	function getPatientInfo()
	{
		homehub.getPatientInfo(function(value){
			
			document.getElementById("Name").innerHTML=value.Name;
			document.getElementById("ID").innerHTML=value.ID;
			document.getElementById("體重").innerHTML=value.體重;
			document.getElementById("血壓").innerHTML=value.血壓;
			
		});
	}
	
	function register()
	{
		homehub.registerMessage(onMessage);
	}
	
	function onMessage(value){
		document.getElementById("Message").innerHTML=value;
	}
	
	function tostartNFC(){
		homehub.StartNFC(function(value){
			document.getElementById("NFC").innerHTML=value;
		});
	}
	
	
	//LED----------------------------------
	
	function setScript(){
		hLED.SetScript(function(id){ScriptID=id;alert(id);}, mScript);
	}
	
	function playLED(){
		hLED.Play(ScriptID, 100);
	}
	
	function stopLED(){
		hLED.Stop();
	}
	//-------------------------------------
	
	
	//----------------------------------
	function RecordEventBtn(){
		var TAG1=document.getElementById("TAG1");	
		var TAG2=document.getElementById("TAG2");
		var TAG3=document.getElementById("TAG3");
		var TAG4=document.getElementById("TAG4");
		var TAG5=document.getElementById("TAG5");
		var VALUE1=document.getElementById("VALUE1");
		var VALUE2=document.getElementById("VALUE2");
		var VALUE3=document.getElementById("VALUE3");
		var VALUE4=document.getElementById("VALUE4");
		var VALUE5=document.getElementById("VALUE5");
		
		var EVENT_NAME = document.getElementById("EVENTNAME");
	
	
		if (EVENT_NAME.value!=""){	
	
			hMSG.RecordEvent(mySessionID, EVENT_NAME.value);
			
			hMSG.RecordEventWithDuration(mySessionID, EVENT_NAME.value, "123456");
			
			var args = [];
			
			if (TAG1.value!="")
				args.push({"TAG":TAG1.value, "VALUE":VALUE1.value});
			
			if (TAG2.value!="")
				args.push({"TAG":TAG2.value, "VALUE":VALUE2.value});
				
			if (TAG3.value!="")
				args.push({"TAG":TAG3.value, "VALUE":VALUE3.value});
				
			if (TAG4.value!="")			
				args.push({"TAG":TAG4.value, "VALUE":VALUE4.value});
				
			if (TAG5.value!="")
				args.push({"TAG":TAG5.value, "VALUE":VALUE5.value});
			
			hMSG.RecordEventWithContent(mySessionID, EVENT_NAME.value, args);
			
			hMSG.RecordActionWithContentAndDuration(mySessionID, EVENT_NAME.value, args, "123456");
		}
	}

	var mySessionID="";
	
	function StartSession(){
		
		hMSG.StartSession(APPID+USERID, function (sid) {
			mySessionID=sid;
			alert(sid);
		});
	}
	
	function EndSession(){
	
		hMSG.EndSession(mySessionID);
	}
	
	var APPID="";
	var USERID="";
	
	//----------------------------------
	
	
</script>
</head>
<body>
<p>Homehub Message Pass Interface</p>
<p><a href="#" class="btn_large" onclick="callHomeHub('123');" >Call Homehub</a></p>
<p><a href="#" class="btn_large" onclick="getPatientInfo();" >getPatientInfo</a></p>
<p><a href="#" class="btn_large" onclick="register();" >registerMessage</a></p>
<p><a href="#" class="btn_large" onclick="tostartNFC();" >startNFC</a></p>
<p>Name: <label id="Name"></label></p>
<p>ID: <label id="ID"></label></p>
<p>體重: <label id="體重"></label></p>
<p>血壓: <label id="血壓"></label></p>
<p>Message: <label id="Message"></label></p>
<p>NFC-ID: <label id="NFC"></label></p>

<p></p>
<p>LED Control Interface</p>
<p><a href="#" class="btn_large" onclick="setScript();" >setScript</a><label id="ScriptID"></label></p>
<p><a href="#" class="btn_large" onclick="playLED();" >playLED</a></p>
<p><a href="#" class="btn_large" onclick="stopLED();" >stopLED</a></p>

<p></p>
<p>Event Interface</p>
<p><a href="#" class="btn_large" onclick="RecordEventBtn();" >RecordEvent</a></p>
<p><a href="#" class="btn_large" onclick="StartSession();" >Start Session</a></p>
<p><a href="#" class="btn_large" onclick="EndSession();" >End Session</a></p>
<p>EVENT NAME:<input type="text" size="30" id="EVENTNAME"></input></p>
<p>TAG1:<input type="text" size="30" id="TAG1"></input>, Value:<input type="text" size="30" id="VALUE1"></input></p>
<p>TAG2:<input type="text" size="30" id="TAG2"></input>, Value:<input type="text" size="30" id="VALUE2"></input></p>
<p>TAG3:<input type="text" size="30" id="TAG3"></input>, Value:<input type="text" size="30" id="VALUE3"></input></p>
<p>TAG4:<input type="text" size="30" id="TAG4"></input>, Value:<input type="text" size="30" id="VALUE4"></input></p>
<p>TAG5:<input type="text" size="30" id="TAG5"></input>, Value:<input type="text" size="30" id="VALUE5"></input></p>

<p><input type="button" onclick="APPID='A00001';" value="A00001"></input><input type="button" onclick="APPID='A00002'" value="A00002"></input></p>
<p><input type="button" onclick="USERID='Filbert00000';" value="Filbert00000"><input type="button" onclick="USERID='Jeremy000000';" value="Jeremy000000"></p>

</body>

</html>