<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.quanta.qtalk"
>

    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-feature android:name="android.hardware.camera" android:required="false"/>
    <uses-feature android:name="android.hardware.camera.front" android:required="false"/>
    <uses-feature android:name="android.hardware.camera.autofocus" android:required="false"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>
    <uses-permission android:name="android.permission.RECORD_AUDIO"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.READ_CONTACTS"/>
    <uses-permission android:name="android.permission.CALL_PHONE"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.DISABLE_KEYGUARD"/>
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
    <uses-permission android:name="android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS" />
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.POST_NOTIFICATIONS"/>
    <uses-permission android:name="android.permission.SCHEDULE_EXACT_ALARM"/>
    <uses-permission android:name="android.permission.USE_EXACT_ALARM"/>
    <uses-permission android:name="android.permission.CALL_AUDIO_INTERCEPTION"/>

    <uses-sdk
        android:minSdkVersion="26"
        android:targetSdkVersion="31" />

    <application>
        <provider
            android:name="androidx.core.content.FileProvider"
            android:authorities="com.quanta.qtalk.fileprovider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/file_paths" />
        </provider>
        <activity android:name="com.quanta.qtalk.QtalkMain"
		  android:excludeFromRecents="true"
                  android:label="@string/app_name"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:configChanges="orientation|keyboardHidden"
		>
            <!--
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
		    </intent-filter>
            -->
        </activity>

        <activity android:name="com.quanta.qtalk.ui.NotificationActivity" 
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTop"
                  android:configChanges="orientation|keyboardHidden">
        </activity>

        <activity android:name="com.quanta.qtalk.ui.AvatarActivity"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTop"
                  android:configChanges="orientation|keyboardHidden"
                  android:windowSoftInputMode="adjustPan|adjustResize">
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.BroadcastActivity" 
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTask"
                  android:configChanges="orientation|keyboardHidden"
                  android:windowSoftInputMode="adjustPan|adjustResize">
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.VideoEndPopWindow" 
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTop"
                  android:configChanges="orientation|keyboardHidden"
                  android:windowSoftInputMode="adjustPan|adjustResize">
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.BusyCallActivity" 
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:excludeFromRecents="true"
                  android:launchMode="singleTask"
                  android:configChanges="orientation|keyboardHidden"
                  android:windowSoftInputMode="adjustPan|adjustResize">
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.AvatarImagePickActivity" 
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTop"
                  android:configChanges="orientation|keyboardHidden">
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.LoginRetryActivity"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTask"
                  android:configChanges="orientation|keyboardHidden"
            android:exported="true">
            <intent-filter>
                <action android:name="com.quanta.qtalk.ui.login.retry" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name="com.quanta.qtalk.ui.HistoryActivity"
                  android:excludeFromRecents="true"
            	  android:theme="@android:style/Theme.NoTitleBar"
        		  android:launchMode="singleTask"
        		  android:configChanges="orientation|keyboardHidden"
            android:exported="true">
        	<intent-filter>
                <action android:name="com.quanta.qtalk.ui.history" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.NotificationResumeActivity"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTop"
            android:exported="true">
        		  <intent-filter>
                <action android:name="com.quanta.qtalk.ui.resume" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.MissCallNotificationResumeActivity"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTask"
            android:exported="true">
            <intent-filter>
                <action android:name="com.quanta.qtalk.ui.history.resume" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.ProvisionLoginActivity"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTask"
                  android:configChanges="orientation|keyboardHidden"
            android:exported="true">
            <intent-filter>
                <action android:name="com.quanta.qtalk.ui.provision.login" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.SIPLoginActivity"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTask"
                  android:configChanges="orientation|keyboardHidden"
            android:exported="true">
            <intent-filter>
                <action android:name="com.quanta.qtalk.ui.login.sip" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.QtalkCheckActivity2"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTask"
                  android:excludeFromRecents="true"
                  android:configChanges="orientation|keyboardHidden"
        		  >
        </activity>

        <activity android:name="com.quanta.qtalk.ui.ProvisionSetupActivity"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTask"
                  android:configChanges="orientation|keyboardHidden"
        		  >
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.ContactsActivity"
                  android:label="Contact list" 
                  android:theme="@android:style/Theme.NoTitleBar"
                  android:screenOrientation="portrait"
                  android:launchMode="singleTask"
                  android:excludeFromRecents="true"
                  android:configChanges="orientation|keyboardHidden">

        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.OutgoingCallActivity"
                  android:label="Calling out!!" 
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTask"
                  android:excludeFromRecents="true"
                  android:configChanges="orientation|keyboardHidden"
            android:exported="true">
                    <intent-filter>
                        <action android:name="com.quanta.qtalk.ui.outgoingcall" />
                        <category android:name="android.intent.category.DEFAULT" />
                    </intent-filter>
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.OutgoingCallFailActivity"
                  android:label="Calling out fail!!" 
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:launchMode="singleTask"
                  android:excludeFromRecents="true"
                  android:configChanges="orientation|keyboardHidden"
            android:exported="true">
                    <intent-filter>
                        <action android:name="com.quanta.qtalk.ui.outgoingcallfail" />
                        <category android:name="android.intent.category.DEFAULT" />
                    </intent-filter>
        </activity>
        
        <!--  -->
        <activity android:name="com.quanta.qtalk.ui.InVideoSessionActivity"
                  android:label="in video call session" 
                  android:theme="@style/Theme.videocallsessionBg"
                  android:configChanges="orientation|screenSize|keyboardHidden"
                  android:excludeFromRecents="true"
                  android:screenOrientation="fullSensor"
                  android:launchMode="singleTask"
            android:exported="true">
                    <intent-filter>
                        <action android:name="com.quanta.qtalk.ui.videosession" />
                        <category android:name="android.intent.category.DEFAULT" />
                    </intent-filter>
        </activity>

         <activity android:name="com.quanta.qtalk.ui.InAudioSessionActivity"
                  android:label="in voice call session" 
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:excludeFromRecents="true"
                  android:launchMode="singleTask"
                  android:configChanges="orientation|keyboardHidden"
             android:exported="true">
                    <intent-filter>
                        <action android:name="com.quanta.qtalk.ui.audiosession" />
                        <category android:name="android.intent.category.DEFAULT" />
                    </intent-filter>
        </activity>
        
         <activity android:name="com.quanta.qtalk.ui.InPttSessionActivity"
                  android:label="in ptt broadcast session" 
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:excludeFromRecents="true"
                  android:launchMode="singleTask"
                  android:configChanges="orientation|keyboardHidden"
             android:exported="true">
                    <intent-filter>
                        <action android:name="com.quanta.qtalk.ui.pttsession" />
                        <category android:name="android.intent.category.DEFAULT" />
                    </intent-filter>
        </activity>
        
        <activity android:name="com.quanta.qtalk.ui.IncomingCallActivity"
                  android:label="Incoming call"
                  android:excludeFromRecents="true"
                  android:launchMode="singleTask"
                  android:theme="@android:style/Theme.Translucent.NoTitleBar"
                  android:configChanges="orientation|keyboardHidden"
            android:exported="true">
                <intent-filter>
                    <action android:name="com.quanta.qtalk.ui.incomingcall" />
                    <category android:name="android.intent.category.DEFAULT" />
                </intent-filter>
        </activity>


        <receiver android:name="com.quanta.qtalk.ui.QTRAAlarm"/>
        
        <receiver android:enabled="true" android:name="com.quanta.qtalk.ui.QTReceiver"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.intent.action.QUICKBOOT_POWERON" />
                <action android:name="com.htc.intent.action.QUICKBOOT_POWERON" />
                <action android:name="android.intent.action.USER_PRESENT"  />
                <action android:name="com.quanta.qtalk.APP_START" />
              </intent-filter>
        </receiver>
        <receiver android:enabled="true" android:name="com.quanta.qtalk.ui.LauncherReceiver"
            android:priority="500"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.intent.action.QUICKBOOT_POWERON" />
                <action android:name="com.htc.intent.action.QUICKBOOT_POWERON" />
                <action android:name="android.intent.action.USER_PRESENT"  />
                <action android:name="android.intent.action.ACTION_SCREEN_ON"  />
                <action android:name="android.intent.action.ACTION_SCREEN_OFF"  />
                <action android:name="com.quanta.qtalk.APP_START" />
                <action android:name="android.intent.action.vc.contacts" />
                <action android:name="android.intent.action.vc.history" />
                <action android:name="android.intent.action.vc.login"/>    
                <action android:name="android.intent.action.vc.logout" />  
                <action android:name="android.intent.action.vc.message" />
                <action android:name="android.intent.action.vc.login" />
                <action android:name= "android.intent.action.vc.message" />
                <action android:name="android.intent.action.vc.get.login.data" />
                <action android:name="android.intent.action.vc.return.login.data" />
                <action android:name="android.intent.action.vc.makecall" />
                <action android:name="android.intent.action.vc.makecall.cb" />
                <action android:name="android.intent.action.vc.nurse.call" />
                <action android:name="android.intent.action.vc.logout" />
                <action android:name="android.intent.action.vc.tts.list" />
                <action android:name="android.intent.action.vc.tts" />
                <action android:name="android.intent.action.vc.tts.cb" />
                <action android:name="android.intent.action.vc.contacts" />
                <action android:name="android.intent.action.vc.history" />
                <action android:name="android.intent.action.vc.logon.state" />
                <action android:name="android.intent.action.vc.logon.state.cb" />
                <action android:name="android.intent.action.vc.alarm" />
                <action android:name="android.intent.action.ptms.tts" />
                <action android:name="android.intent.action.qlauncher.notification.count" />
                <action android:name="android.intent.action.qlauncher.notification.query" />
                <action android:name="android.intent.action.tts.broadcast.msg" />
                <action android:name="com.quanta.qspt.handset.pickup" />
                <action android:name="com.quanta.qspt.handset.hangup" />
                <action android:name="pta.rq.1" />
                <action android:name="pta.rc.1" />
                <action android:name="pta.resource.change" />
                <action android:name="android.intent.action.vc.login.cb" />
                <action android:name="android.intent.action.vc.logout.cb.login.after" />
                <action android:name="android.intent.action.vc.logout.cb" />
              </intent-filter>
        </receiver>

        <receiver android:name="com.quanta.qtalk.ui.LogonStateReceiver">
            <intent-filter>
                <action android:name="com.quanta.qtalk.ui.logon.state" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver>
        <service
            android:name="com.quanta.qtalk.ui.QTService"
            android:enabled="true">
        </service>
        <service
            android:name="com.quanta.qtalk.ui.CommandService"
            android:enabled="true" >
        </service>
        <service android:name="com.quanta.qtalk.ui.QtalkNotificationListenerService"
            android:permission="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE"
            android:exported="true">
            <intent-filter>
                <action android:name="android.service.notification.NotificationListenerService" />
            </intent-filter>
        </service>
        <activity android:name="com.quanta.qtalk.ui.TransparentActivity"
            android:theme = "@style/Transparent"
            android:screenOrientation="portrait"
            android:excludeFromRecents="true"
            android:launchMode="singleTask"
            android:configChanges="orientation|keyboardHidden"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
				<category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.quanta.qtalk.ui.PermissionRequestActivity"
            android:theme="@style/Theme.NoTitle"
            android:screenOrientation="fullSensor"
            android:launchMode="singleTask"
            android:label="Permission Request"
            android:excludeFromRecents="true"
            android:exported="true"
            android:configChanges="orientation|keyboardHidden">
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <receiver
            android:name="com.quanta.qtalk.ui.PermissionRequestReceiver"
            android:exported="true"
            android:enabled="true">
            <intent-filter>
                <action android:name="com.quanta.qtalk.ui.permission_request" />
            </intent-filter>
        </receiver>
         <service android:name="com.quanta.qtalk.media.video.VideoLocalService"/>
        <service android:name="com.quanta.qtalk.media.audio.AudioService"/>

        <uses-library  android:name="com.motorola.hardware.frontcamera" android:required="false"/>
    
    </application>


</manifest> 
